% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generalidad_frecuencias.R
\name{freq_table_spss}
\alias{freq_table_spss}
\title{Tabla de frecuencias ponderadas para una variable}
\usage{
freq_table_spss(
  data,
  var,
  survey = NULL,
  sm_vars_force = NULL,
  orders_list = NULL,
  mostrar_todo = FALSE
)
}
\arguments{
\item{data}{Data frame o tibble con la base de datos.}

\item{var}{Nombre de la variable (como cadena) para la que se desea la tabla.
Puede ser el nombre de la madre (\code{"p106"}, \code{"p106_recod"}) aunque en la
base solo existan las dummies (\code{p106.1}, \code{p106.2}, etc.).}

\item{survey}{Tibble con metadatos del instrumento (hoja \code{survey}), que
debe contener al menos las columnas \code{name} y \code{type}. Se utiliza para
diferenciar \code{select_one} y \code{select_multiple}. Puede ser \code{NULL}.}

\item{sm_vars_force}{Vector opcional de nombres de variables que deben tratarse
como \code{select_multiple} aunque el instrumento no las marque como tales.}

\item{orders_list}{Lista opcional con información de orden de categorías
por variable (por ejemplo, \code{instrumento$orders_list}).}

\item{mostrar_todo}{Lógico; si \code{TRUE}, incluye en la tabla todas las
categorías definidas en \code{orders_list[[var]]$labels}, incluso si su
frecuencia es 0.}
}
\value{
Un tibble con las columnas:
\describe{
\item{Opciones}{Código o etiqueta de la categoría.}
\item{n}{Frecuencia ponderada.}
\item{pct}{Porcentaje relativo (0–1).}
}
}
\description{
Calcula una tabla de frecuencias (n y porcentaje) para una variable de la
base de reporte. Soporta variables de tipo elección múltiple (\code{select_multiple})
codificadas como:
\itemize{
\item Variable madre con códigos separados por \code{";"} (p. ej. \code{"1;3;4"}).
\item Dummies derivadas:
\itemize{
\item Formato original tipo KoBo: \code{var/cod}.
\item Formato normalizado tipo SPSS: \code{var.cod} (solo dummies, sin madre).
}
}
}
\details{
La identificación de que una variable es \code{select_multiple} se basa en:
\itemize{
\item El \code{survey} (tipo \code{select_multiple} para \code{name == var}), o
\item El argumento \code{sm_vars_force}, o
\item La existencia de dummies asociadas (\code{var/cod} o \code{var.cod}) aunque
la madre no exista como columna.
}

La función utiliza, cuando están disponibles:
\itemize{
\item Atributos \code{labels} de la variable en \code{data} (para mapear códigos a
etiquetas), en el caso de madres “pegadas”.
\item \code{orders_list} (si se proporciona) para ordenar las categorías según
el instrumento.
\item Una variable de peso llamada \code{peso} en \code{data}. Si no existe, se
asume peso 1 para todos los casos.
}
}
