% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/graficar_barras_medias.R
\name{graficar_barras_numericas}
\alias{graficar_barras_numericas}
\title{Graficar barras agrupadas de valores numéricos por categoría}
\usage{
graficar_barras_numericas(
  data,
  var_categoria,
  var_n = NULL,
  vars_valor,
  etiquetas_series,
  orientacion = c("horizontal", "vertical"),
  formato_valor = c("numero", "moneda"),
  decimales = 1,
  simbolo_moneda = "S/",
  separador_miles = ".",
  separador_decimales = ",",
  colores_series = NULL,
  mostrar_valores = TRUE,
  umbral_etiqueta = 0.03,
  umbral_interno = 0.15,
  mostrar_barra_extra = FALSE,
  prefijo_barra_extra = "N=",
  titulo_barra_extra = NULL,
  titulo = NULL,
  subtitulo = NULL,
  nota_pie = NULL,
  pos_titulo = c("centro", "izquierda", "derecha"),
  pos_nota_pie = c("derecha", "izquierda", "centro"),
  color_titulo = "#000000",
  size_titulo = 11,
  color_subtitulo = "#000000",
  size_subtitulo = 9,
  color_nota_pie = "#000000",
  size_nota_pie = 8,
  color_leyenda = "#000000",
  size_leyenda = 8,
  color_texto_barras = "#000000",
  size_texto_barras = 3,
  color_barra_extra = "#000000",
  size_barra_extra = 3,
  color_ejes = "#000000",
  size_ejes = 9,
  color_fondo = NA,
  extra_derecha_rel = 0.1,
  ancho_max_eje_cat = NULL,
  mostrar_leyenda = TRUE,
  invertir_leyenda = FALSE,
  invertir_barras = FALSE,
  textos_negrita = NULL,
  exportar = c("rplot", "png", "ppt", "word"),
  path_salida = NULL,
  ancho = 10,
  alto = 6,
  alto_por_categoria = NULL,
  dpi = 300
)
}
\arguments{
\item{data}{Data frame en formato ancho que contiene la categoría, la base N
(opcional) y las columnas de valores numéricos.}

\item{var_categoria}{Nombre (string) de la columna que define cada categoría
en el eje (por ejemplo, \code{"servicio"} o \code{"condicion"}).}

\item{var_n}{Nombre (string) de la columna con el N total por categoría.
Se usa para mostrar una etiqueta adicional al extremo derecho de las barras
(por ejemplo \code{"N=50"}). Si es \code{NULL}, no se muestra la barra extra.}

\item{vars_valor}{Vector de nombres de columnas con los valores numéricos
que se desean comparar como series agrupadas (por ejemplo,
\code{c("promedio_total", "promedio_consulta")}).}

\item{etiquetas_series}{Vector de caracteres con nombre (named) que asigna
etiquetas legibles a las columnas de \code{vars_valor}. Los nombres deben
coincidir exactamente con \code{vars_valor}; los valores se usan en la
leyenda.}

\item{orientacion}{Orientación de las barras: \code{"horizontal"} (por
defecto) o \code{"vertical"}. En horizontal las categorías se muestran en
el eje Y; en vertical, en el eje X.}

\item{formato_valor}{Formato de las etiquetas de valor:
\code{"numero"} o \code{"moneda"} (por ejemplo, S/).}

\item{decimales}{Número de decimales a mostrar en las etiquetas.}

\item{simbolo_moneda}{Símbolo de moneda a anteponer cuando
\code{formato_valor = "moneda"}.}

\item{separador_miles}{Separador de miles para el formato numérico/moneda.}

\item{separador_decimales}{Separador de decimales para el formato
numérico/moneda.}

\item{colores_series}{Vector de colores HEX con nombre (opcional) para las
series, usando como nombres las etiquetas de \code{etiquetas_series}. Si
se omite, \pkg{ggplot2} asignará colores por defecto.}

\item{mostrar_valores}{Lógico; si \code{TRUE}, muestra las etiquetas de
valor para cada barra.}

\item{umbral_etiqueta}{Mínimo valor (en escala original) para mostrar
etiquetas. Debajo de este umbral, el texto se oculta.}

\item{umbral_interno}{Umbral (en escala original) para decidir si la
etiqueta se muestra dentro de la barra (centrada) o justo al final hacia
la derecha. Valores mayores o iguales a \code{umbral_interno} se dibujan
dentro de la barra; valores entre \code{umbral_etiqueta} y
\code{umbral_interno} se dibujan fuera.}

\item{mostrar_barra_extra}{Lógico; si \code{TRUE} y \code{var_n} no es
\code{NULL}, agrega una "barra extra" de texto al extremo derecho de cada
categoría (típicamente el N, por ejemplo \code{"N=50"}).}

\item{prefijo_barra_extra}{Texto añadido antes del valor mostrado en la
barra extra (por defecto \code{"N="}).}

\item{titulo_barra_extra}{Texto que se coloca como encabezado encima de la
columna de barra extra (por ejemplo, \code{"Total"}). Si es \code{NULL}, no se
agrega encabezado.}

\item{titulo}{Título del gráfico.}

\item{subtitulo}{Subtítulo opcional del gráfico.}

\item{nota_pie}{Nota o fuente para colocar en el pie de página del gráfico.}

\item{pos_titulo}{Alineación horizontal del título: \code{"centro"},
\code{"izquierda"} o \code{"derecha"}.}

\item{pos_nota_pie}{Alineación horizontal de la nota al pie (caption):
\code{"derecha"}, \code{"izquierda"} o \code{"centro"}.}

\item{color_titulo}{Color del título.}

\item{size_titulo}{Tamaño del título.}

\item{color_subtitulo}{Color del subtítulo.}

\item{size_subtitulo}{Tamaño del subtítulo.}

\item{color_nota_pie}{Color del texto del pie de página.}

\item{size_nota_pie}{Tamaño del texto del pie de página.}

\item{color_leyenda}{Color del texto de la leyenda.}

\item{size_leyenda}{Tamaño del texto de la leyenda.}

\item{color_texto_barras}{Color del texto de las etiquetas de valor.}

\item{size_texto_barras}{Tamaño del texto de las etiquetas de valor.}

\item{color_barra_extra}{Color del texto de la barra extra (N).}

\item{size_barra_extra}{Tamaño del texto de la barra extra.}

\item{color_ejes}{Color del texto de las categorías en el eje de categorías.}

\item{size_ejes}{Tamaño del texto de las categorías en el eje de categorías.}

\item{color_fondo}{Color de fondo del panel y del plot (por defecto
\code{NA}, transparente).}

\item{extra_derecha_rel}{Porcentaje adicional de espacio a la derecha,
relativo a la barra más larga, para ubicar la barra extra (N).}

\item{ancho_max_eje_cat}{Número aproximado de caracteres por línea para las
etiquetas de las categorías. Si no es \code{NULL}, se insertan saltos de
línea automáticos entre palabras usando \pkg{stringr}.}

\item{mostrar_leyenda}{Lógico; si \code{FALSE}, oculta la leyenda (útil
si solo hay una serie).}

\item{invertir_leyenda}{Lógico; si \code{TRUE}, invierte el orden de los
ítems de la leyenda.}

\item{invertir_barras}{Lógico; si \code{TRUE}, invierte el orden en que las
categorías aparecen (arriba/abajo en horizontal o izquierda/derecha en
vertical).}

\item{textos_negrita}{Vector de caracteres que indica qué elementos deben
mostrarse en negrita. Puede incluir cualquiera de:
\code{"titulo"}, \code{"valores"}, \code{"leyenda"}, \code{"barra_extra"}.}

\item{exportar}{Método de salida: \code{"rplot"} (devuelve un objeto
\code{ggplot}), \code{"png"} (exporta un archivo PNG),
\code{"ppt"} (exporta una diapositiva PPTX) o \code{"word"} (exporta un
documento Word con el gráfico incrustado).}

\item{path_salida}{Ruta del archivo a crear cuando \code{exportar} no es
\code{"rplot"}.}

\item{ancho}{Ancho del gráfico (cuando se exporta a archivo).}

\item{alto}{Alto del gráfico (cuando se exporta a archivo).}

\item{alto_por_categoria}{Alto (en pulgadas) a asignar por categoría en el
área de barras cuando no se especifica \code{alto}. Sobre ese alto se suma
automáticamente un bloque fijo para la leyenda (si \code{mostrar_leyenda})
y otro más pequeño para el caption (si existe), y luego se acota entre un
mínimo y un máximo razonables para mantener la consistencia visual.}

\item{dpi}{Resolución en puntos por pulgada (solo para PNG).}
}
\value{
Un objeto \code{ggplot} si \code{exportar = "rplot"}. De forma
invisible, el gráfico exportado si se utiliza \code{"png"}, \code{"ppt"}
o \code{"word"}.
}
\description{
Genera un gráfico de barras agrupadas donde cada categoría (por ejemplo,
servicios, enfermedades, regiones) se muestra en el eje de categorías y,
para cada una, se comparan una o más medidas numéricas (por ejemplo,
"Tarifa promedio", "Tarifa mínima"), diferenciadas por color y con
leyenda inferior.
}
\details{
La función está pensada para usarse directamente con tablas de indicadores
ya calculadas (formato ancho), sin necesidad de reestructurar los datos
manualmente.
}
