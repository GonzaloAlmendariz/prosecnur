% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plan_config.R
\name{auto_section_map}
\alias{auto_section_map}
\title{Construir mapa de secciones (group -> prefix) de forma automática}
\usage{
auto_section_map(survey_df, section_prefix_map = NULL)
}
\arguments{
\item{survey_df}{Data frame del survey (como lo entrega \code{read_xlsform()}),
debe contener al menos la columna \code{group_name}. Si existe \code{group_label}
se usará para la segunda columna del mapa; si no, se rellena con \code{group_name}.}

\item{section_prefix_map}{(opcional) vector o lista \emph{nombrada} que mapea
\code{group_name} \strong{o} \code{group_label} -> \code{prefix}.}
}
\value{
Un \code{tibble} con columnas \code{group_name}, \code{group_label}, \code{prefix}.
}
\description{
Genera un \code{section_map} mínimo a partir del \code{survey} ya leído, con
columnas: \code{group_name}, \code{group_label} y \code{prefix}.
}
\details{
Reglas:
\itemize{
\item Si se provee \code{section_prefix_map} (vector/lista nombrada donde los
\emph{nombres} son \code{group_name} \strong{o} \code{group_label} y los \emph{valores} son
prefijos como \code{"USO_"}), se respeta para esos grupos.
\item Para los grupos no mapeados, se genera un prefijo \strong{a partir del
\code{group_label} (si existe; si no, del \code{group_name})}:
\itemize{
\item Se normaliza a ASCII (sin tildes), mayúsculas y alfanumérico.
\item Se toman las \strong{tres primeras consonantes}; si no alcanzan,
se completa con las primeras letras disponibles.
\item Se asegura sufijo \code{"_"} (quedan como \code{ABC_}).
}
\item Se garantiza unicidad de prefijos. Si hay colisión, se agrega un
sufijo \verb{_A_}, \verb{_B_}, ... respetando la forma \code{XXX_}, \code{XXX_A_}, etc.
}
}
\keyword{internal}
